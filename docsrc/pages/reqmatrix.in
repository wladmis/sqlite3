<title>Requirements Derivation Matrix</title>

<tcl>
# Read all of the requirements content out of the "req" folder
#
unset -nocomplain REQMATRIX
foreach file [lsort [glob $::DOC/req/*.txt]] {
  hd_read_requirement_file $file REQMATRIX
}
</tcl>

<h2>Requirements Derivation Matrix</h2>

<table cellspacing="20">
<tcl>
unset -nocomplain REQMATRIX_CHILDREN
foreach id $REQMATRIX(*) {set REQMATRIX_CHILDREN($id) {}}
foreach id $REQMATRIX(*) {
  foreach pid [lindex $REQMATRIX($id) 0] {
    lappend REQMATRIX_CHILDREN($pid) $id
  }
} 
foreach id $REQMATRIX(*) {
  if {[string index $id 0]=="A"} continue
  hd_puts "\n<tr>\n"
  hd_puts "<td valign=\"top\"><a name=\"$id\">$id</a></td>\n"
  hd_puts "<td valign=\"top\">\n"
  hd_resolve [lindex $REQMATRIX($id) 1]
  hd_puts \n<p>
  set plist [lindex $REQMATRIX($id) 0]
  if {[llength $plist]==0} {
    hd_puts "<i>No parents</i>"
  } else {
    hd_puts "Parents:"
    foreach pid $plist {
      hd_puts " <a href=\"#$pid\">$pid</a>\n"
    }
  }
  hd_puts </p>\n<p>
  set clist $REQMATRIX_CHILDREN($id)
  if {[llength $clist]==0} {
    hd_puts "<i>No children</i>"
  } else {
    hd_puts "Children:"
    foreach cid $clist {
      hd_puts " <a href=\"#$cid\">$cid</a>\n"
    }
  }
  hd_puts </p>\n
  hd_puts "</td></tr>\n"
}
</tcl>
</table>
